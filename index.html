<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø± - Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©</title>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <!-- html2canvas Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- QR Code Library -->
    <script src="https://unpkg.com/qrcodejs@1.0.0/qrcode.min.js"></script>
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
            color: #333;
            text-align: center;
            padding: 20px;
            margin: 0;
            transition: background 0.3s ease, color 0.3s ease;
            animation: changeBackground 10s infinite;
            background-size: cover;
        }
        body.dark-mode {
            background: linear-gradient(135deg, #1e1e1e, #121212);
            color: #f0f0f0;
            animation: none;
        }
        body.festival-mode {
            animation: changeFestiveBackground 10s infinite;
        }
        @keyframes changeBackground {
            0% { background-image: url('https://example.com/zellij_pattern1.jpg'); }
            33% { background-image: url('https://example.com/zellij_pattern2.jpg'); }
            66% { background-image: url('https://example.com/zellij_pattern3.jpg'); }
            100% { background-image: url('https://example.com/zellij_pattern1.jpg'); }
        }
        @keyframes changeFestiveBackground {
            0% { background-image: url('https://example.com/yennayer_fest.jpg'); }
            33% { background-image: url('https://example.com/ramadan_lights.jpg'); }
            66% { background-image: url('https://example.com/eid_fitr.jpg'); }
            100% { background-image: url('https://example.com/yennayer_fest.jpg'); }
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            margin: 0 auto;
            backdrop-filter: blur(10px);
            transition: background 0.3s ease, box-shadow 0.3s ease;
        }
        body.dark-mode .container {
            background: rgba(30, 30, 30, 0.95);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }
        h1 {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }
        body.dark-mode h1 {
            color: #f0f0f0;
        }
        .icon {
            font-size: 2em;
            color: #2c3e50;
            margin: 10px;
            transition: color 0.3s ease;
        }
        body.dark-mode .icon {
            color: #f0f0f0;
        }
        .circle-input {
            position: relative;
            margin: 10px;
        }
        .circle-input input[type="text"], .circle-input select {
            padding: 12px 40px 12px 20px;
            border: 2px solid #28a745;
            border-radius: 50px;
            font-size: 1em;
            width: 80%;
            background: rgba(255, 255, 255, 0.8);
            color: #333;
            text-align: center;
            transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        .circle-input input:invalid {
            border-color: #dc3545;
        }
        .circle-input i {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            color: #28a745;
        }
        body.dark-mode .circle-input input[type="text"], 
        body.dark-mode .circle-input select {
            background: rgba(30, 30, 30, 0.8);
            color: #f0f0f0;
            border-color: #dc3545;
        }
        body.dark-mode .circle-input i {
            color: #dc3545;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            background-color: #218838;
            transform: scale(1.05);
        }
        button.red {
            background-color: #dc3545;
        }
        button.red:hover {
            background-color: #c82333;
        }
        button.white {
            background-color: #f8f9fa;
            color: #333;
        }
        button.white:hover {
            background-color: #e2e6ea;
        }
        body.dark-mode button {
            background-color: #dc3545;
        }
        body.dark-mode button:hover {
            background-color: #c82333;
        }
        body.dark-mode button.white {
            background-color: #343a40;
            color: #f0f0f0;
        }
        body.dark-mode button.white:hover {
            background-color: #495057;
        }
        .social-share {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        .social-share button {
            background-color: #007bff;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .social-share button:hover {
            background-color: #0056b3;
        }
        body.dark-mode .social-share button {
            background-color: #28a745;
        }
        body.dark-mode .social-share button:hover {
            background-color: #218838;
        }
        #result {
            margin-top: 20px;
            font-size: 1.4em;
            color: #2c3e50;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        body.dark-mode #result {
            color: #f0f0f0;
        }
        .funny-text {
            font-style: italic;
            color: #dc3545;
            margin-top: 10px;
            font-size: 1.1em;
            transition: color 0.3s ease;
        }
        body.dark-mode .funny-text {
            color: #ff6b6b;
        }
        #zodiacSign, #funStats, #advice, #gameResult, #visitorCounter, #quizResult {
            margin-top: 15px;
            font-size: 1.2em;
            color: #28a745;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        body.dark-mode #zodiacSign, body.dark-mode #funStats, body.dark-mode #advice,
        body.dark-mode #gameResult, body.dark-mode #visitorCounter, body.dark-mode #quizResult {
            color: #dc3545;
        }
        .footer {
            margin-top: 20px;
            font-size: 0.9em;
            color: #6c757d;
            transition: color 0.3s ease;
        }
        body.dark-mode .footer {
            color: #adb5bd;
        }
        .footer a {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        body.dark-mode .footer a {
            color: #28a745;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .share-button, .qr-button, .certificate-button, .quiz-button, .download-button {
            background-color: #dc3545;
            display: none;
        }
        .share-button:hover, .qr-button:hover, .certificate-button:hover, .quiz-button:hover, .download-button:hover {
            background-color: #c82333;
        }
        body.dark-mode .share-button, body.dark-mode .qr-button, body.dark-mode .certificate-button,
        body.dark-mode .quiz-button, body.dark-mode .download-button {
            background-color: #28a745;
        }
        body.dark-mode .share-button:hover, body.dark-mode .qr-button:hover, body.dark-mode .certificate-button:hover,
        body.dark-mode .quiz-button:hover, body.dark-mode .download-button:hover {
            background-color: #218838;
        }
        .share-container, .certificate-container {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
            transition: background 0.3s ease, box-shadow 0.3s ease;
            z-index: 1000;
        }
        .share-container h2, .share-container p, .certificate-container h2, .certificate-container p {
            margin: 10px 0;
            font-size: 1.5em;
            color: #333;
        }
        body.dark-mode .share-container, body.dark-mode .certificate-container {
            background: rgba(30, 30, 30, 0.95);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }
        body.dark-mode .share-container h2, body.dark-mode .share-container p,
        body.dark-mode .certificate-container h2, body.dark-mode .certificate-container p {
            color: #f0f0f0;
        }
        .frame {
            border: 10px solid transparent;
            padding: 20px;
            background: white;
            border-radius: 20px;
            position: relative;
            transition: background 0.3s ease;
        }
        .frame.zellij {
            border-image: url('https://example.com/zellij_pattern.png') 30 stretch;
        }
        .frame.tifinagh {
            border-image: url('https://example.com/tifinagh_pattern.png') 30 stretch;
        }
        body.dark-mode .frame {
            background: #1e1e1e;
        }
        .frame::after {
            content: "Ù…Ø·ÙˆØ± Ø¨ÙˆØ§Ø³Ø·Ø©: Abdelillahdris";
            font-family: 'Tajawal', sans-serif;
            font-size: 1em;
            color: #2c3e50;
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 0 10px;
            transition: color 0.3s ease, background 0.3s ease;
        }
        body.dark-mode .frame::after {
            color: #f0f0f0;
            background: #1e1e1e;
        }
        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }
        .dark-mode-toggle:hover {
            background: #0056b3;
        }
        body.dark-mode .dark-mode-toggle {
            background: #28a745;
        }
        body.dark-mode .dark-mode-toggle:hover {
            background: #218838;
        }
        .music-toggle {
            position: fixed;
            top: 60px;
            right: 20px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }
        .music-toggle:hover {
            background: #c82333;
        }
        body.dark-mode .music-toggle {
            background: #ff6b6b;
        }
        body.dark-mode .music-toggle:hover {
            background: #dc3545;
        }
        #qrCode {
            margin: 20px auto;
            display: none;
        }
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: fall 2s linear forwards;
        }
        @keyframes fall {
            0% { transform: translateY(-100vh); opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }
        .game-container, .quiz-container, .adventure-container {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            display: none;
        }
        body.dark-mode .game-container, body.dark-mode .quiz-container, body.dark-mode .adventure-container {
            background: rgba(30, 30, 30, 0.8);
        }
        .game-container button, .quiz-container button, .adventure-container button {
            margin: 5px;
        }
        .guardian {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 80px;
            height: 80px;
            background: url('https://example.com/hadja_fatma.png') no-repeat center;
            background-size: cover;
            animation: bounce 2s infinite;
            z-index: 1000;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .guardian-comment {
            position: fixed;
            bottom: 100px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 10px;
            font-size: 0.9em;
            color: #333;
            max-width: 200px;
            display: none;
            transition: opacity 0.3s ease;
        }
        body.dark-mode .guardian-comment {
            background: rgba(30, 30, 30, 0.9);
            color: #f0f0f0;
        }
        .progress-bar {
            width: 80%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            margin: 10px auto;
            overflow: hidden;
        }
        .progress {
            width: 0;
            height: 100%;
            background: #28a745;
            transition: width 2s ease;
        }
        body.dark-mode .progress-bar {
            background: #495057;
        }
        body.dark-mode .progress {
            background: #dc3545;
        }
    </style>
</head>
<body>
    <!-- Dark Mode Toggle Button -->
    <button class="dark-mode-toggle" onclick="toggleDarkMode()">ğŸŒ™</button>
    <!-- Music Toggle Button -->
    <button class="music-toggle" onclick="toggleMusic()">ğŸ¶</button>
    <!-- Audio Elements -->
    <audio id="bgMusic" loop>
        <source src="path/to/algerian_music.mp3" type="audio/mp3">
    </audio>
    <audio id="clapSound">
        <source src="path/to/clap_sound.mp3" type="audio/mp3">
    </audio>
    <audio id="bravoSound">
        <source src="path/to/bravo.mp3" type="audio/mp3">
    </audio>
    <audio id="errorSound">
        <source src="path/to/ya_wili.mp3" type="audio/mp3">
    </audio>
    <!-- Stars Animation Container -->
    <div class="stars"></div>
    <!-- Guardian Character -->
    <div class="guardian" id="guardian"></div>
    <div class="guardian-comment" id="guardianComment"></div>

    <div class="container">
        <!-- Icon for Fun -->
        <div class="icon">
            <i class="fas fa-birthday-cake"></i>
        </div>
        <h1>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø± - Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© ğŸ˜</h1>
        <p>Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ù…ÙŠÙ„Ø§Ø¯ÙƒØŒ Ø§Ø³Ù…ÙƒØŒ ÙˆÙ„Ù‚Ø¨ÙƒØŒ ÙˆØ®Ù„ÙŠÙ†Ø§ Ù†ÙƒØªØ´ÙÙˆ Ø¹Ù…Ø±Ùƒ ÙÙŠ Ù…ØºØ§Ù…Ø±Ø©! ğŸš€</p>
        
        <!-- Input for Name -->
        <div class="circle-input">
            <input type="text" id="userName" placeholder="Ø§Ø³Ù…Ùƒ" maxlength="50">
            <i class="fas fa-user"></i>
        </div>
        
        <!-- Input for Birthdate -->
        <div class="circle-input">
            <input type="text" id="birthdate" placeholder="DD/MM/YYYY" maxlength="10" pattern="\d{2}/\d{2}/\d{4}" required>
            <i class="fas fa-calendar-alt"></i>
        </div>
        
        <!-- Input for Custom Title -->
        <div class="circle-input">
            <input type="text" id="customTitle" placeholder="Ø§Ø®ØªØ± Ù„Ù‚Ø¨Ùƒ (Ù…Ø«Ù„ Ø¨Ø·Ù„ Ø§Ù„Ø­ÙˆÙ…Ø©)">
        </div>
        
        <!-- Select Dialect -->
        <div class="circle-input">
            <select id="dialect">
                <option value="darja">Ø¯Ø§Ø±Ø¬Ø© Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©</option>
                <option value="kabyle">Ù‚Ø¨Ø§ÙŠÙ„ÙŠØ©</option>
            </select>
            <i class="fas fa-language"></i>
        </div>
        
        <!-- Frame Style Selector -->
        <div class="circle-input">
            <select id="frameStyle">
                <option value="default">Ø¥Ø·Ø§Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ</option>
                <option value="zellij">Ù†Ù…Ø· Ø²Ù„ÙŠØ¬</option>
                <option value="tifinagh">Ù†Ù…Ø· ØªÙŠÙÙŠÙ†Ø§Øº</option>
            </select>
            <i class="fas fa-border-style"></i>
        </div>
        
        <!-- Background Color Selector -->
        <div class="circle-input">
            <select id="bgColor">
                <option value="white">Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡</option>
                <option value="green">Ø®Ù„ÙÙŠØ© Ø®Ø¶Ø±Ø§Ø¡</option>
                <option value="red">Ø®Ù„ÙÙŠØ© Ø­Ù…Ø±Ø§Ø¡</option>
            </select>
            <i class="fas fa-palette"></i>
        </div>
        
        <!-- Button to Start Adventure -->
        <button onclick="startAdventure()" class="red">
            <i class="fas fa-unlock"></i> Ø§ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ø±
        </button>
        
        <!-- Adventure Container -->
        <div class="adventure-container" id="adventureContainer">
            <p>Ø±ØªÙ‘Ø¨ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¹Ù„Ù… Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ù„ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ø±! ğŸ‡©ğŸ‡¿</p>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <button onclick="chooseColor('green')" class="green">Ø£Ø®Ø¶Ø±</button>
            <button onclick="chooseColor('white')" class="white">Ø£Ø¨ÙŠØ¶</button>
            <button onclick="chooseColor('red')" class="red">Ø£Ø­Ù…Ø±</button>
        </div>
        
        <!-- Result Display -->
        <div id="result"></div>
        <div class="funny-text" id="funnyComment"></div>
        <div id="zodiacSign"></div>
        <div id="funStats"></div>
        <div id="advice"></div>
        <div id="gameResult"></div>
        <div id="quizResult"></div>
        <div id="quizScore"></div>
        <div id="visitorCounter"></div>
        
        <!-- Game Container -->
        <div class="game-container" id="gameContainer">
            <p>Ø§Ø®ØªØ¨Ø± Ø¹Ù…Ø±Ùƒ! Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„:</p>
            <p id="gameQuestion"></p>
            <button onclick="answerGame(true)">Ù†Ø¹Ù…</button>
            <button onclick="answerGame(false)">Ù„Ø§</button>
        </div>
        
        <!-- Quiz Container -->
        <div class="quiz-container" id="quizContainer">
            <p>ØªØ­Ø¯ÙŠ: ÙƒÙ… ØªØ¹Ø±Ù Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ØŸ Ø¬Ø§ÙˆØ¨!</p>
            <p id="quizQuestion"></p>
            <button onclick="answerQuiz(0)">Ø§Ù„Ø®ÙŠØ§Ø± 1</button>
            <button onclick="answerQuiz(1)">Ø§Ù„Ø®ÙŠØ§Ø± 2</button>
            <button onclick="answerQuiz(2)">Ø§Ù„Ø®ÙŠØ§Ø± 3</button>
        </div>
        
        <!-- QR Code Container -->
        <div id="qrCode"></div>
        
        <!-- Share Buttons -->
        <button class="share-button" onclick="shareResult()"><i class="fas fa-image"></i> ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø©</button>
        <button class="download-button" onclick="downloadResult()"><i class="fas fa-file-download"></i> ØªØ­Ù…ÙŠÙ„ PDF</button>
        <button class="share-button" onclick="shareToAll()"><i class="fas fa-share-alt"></i> Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„ÙƒÙ„</button>
        <button class="qr-button" onclick="generateQR()"><i class="fas fa-qrcode"></i> Ø±Ù…Ø² QR</button>
        <button class="certificate-button" onclick="generateCertificate()"><i class="fas fa-trophy"></i> Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¹Ù…Ø±</button>
        <button class="quiz-button" onclick="startQuiz()"><i class="fas fa-flag"></i> ØªØ­Ø¯ÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</button>
        <div class="social-share" id="socialShare" style="display: none;">
            <button onclick="shareToWhatsApp()" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± WhatsApp"><i class="fab fa-whatsapp"></i></button>
            <button onclick="shareToFacebook()" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± Facebook"><i class="fab fa-facebook"></i></button>
            <button onclick="shareToX()" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± X"><i class="fab fa-x-twitter"></i></button>
            <button onclick="shareToMessenger()" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± Messenger"><i class="fab fa-facebook-messenger"></i></button>
        </div>
        
        <!-- Footer with Icon -->
        <div class="footer">
            <i class="fas fa-flag"></i> ØµÙ†Ø¹ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø¨Ø­Ø¨ <i class="fas fa-heart"></i> | 
            <a href="https://www.facebook.com/abdelillah.dris.2025" target="_blank">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
        </div>
    </div>

    <!-- Share Container (Hidden by Default) -->
    <div class="share-container" id="shareContainer">
        <div class="frame" id="shareFrame">
            <h2 id="shareResultText"></h2>
            <p id="shareCommentText"></p>
            <p id="shareZodiacSign"></p>
            <p id="shareFunStats"></p>
            <p id="shareAdvice"></p>
            <p id="shareGameResult"></p>
            <p id="shareQuizResult"></p>
            <p id="shareDateText"></p>
        </div>
    </div>

    <!-- Certificate Container (Hidden by Default) -->
    <div class="certificate-container" id="certificateContainer">
        <div class="frame" id="certificateFrame">
            <h2>Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© ğŸ†</h2>
            <p id="certificateName"></p>
            <p id="certificateTitle"></p>
            <p id="certificateAge"></p>
            <p id="certificateZodiac"></p>
            <p id="certificateComment"></p>
            <p id="certificateDate"></p>
            <p id="certificateStamp">Ù…Ø¹ØªÙ…Ø¯ Ù…Ù† Ø§Ù„Ø­ÙˆÙ…Ø© ğŸ‡©ğŸ‡¿</p>
        </div>
    </div>

    <script>
        // Initialize jsPDF
        const { jsPDF } = window.jspdf;

        // Dark Mode Toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const darkModeToggle = document.querySelector('.dark-mode-toggle');
            darkModeToggle.innerHTML = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        // Music Toggle
        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            music.paused ? music.play() : music.pause();
        }

        // Auto-format and validate date input
        const birthdateInput = document.getElementById('birthdate');
        birthdateInput.addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 2) value = value.slice(0, 2) + '/' + value.slice(2);
            if (value.length > 5) value = value.slice(0, 5) + '/' + value.slice(5);
            e.target.value = value.slice(0, 10);
            showGuardianComment('Ø¯Ø®Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù…Ù„ÙŠØ­ØŒ ÙŠØ§ Ø¨Ø·Ù„! ğŸ˜');
        });

        // Validate date
        function validateDate(day, month, year) {
            try {
                const date = new Date(`${year}-${month}-${day}`);
                const today = new Date();
                return date instanceof Date && !isNaN(date) && date <= today && date.getFullYear() >= 1900;
            } catch (e) {
                return false;
            }
        }

        // Guardian Comments
        function showGuardianComment(text) {
            const comment = document.getElementById('guardianComment');
            comment.innerText = text;
            comment.style.display = 'block';
            setTimeout(() => {
                comment.style.display = 'none';
            }, 3000);
        }

        // Adventure Logic
        let colorOrder = ['green', 'white', 'red'];
        let currentStep = 0;
        function startAdventure() {
            const birthdateValue = document.getElementById('birthdate').value;
            const userName = document.getElementById('userName').value.trim() || "Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ù…Ø¬Ù‡ÙˆÙ„";
            if (!birthdateValue.match(/^\d{2}\/\d{2}\/\d{4}$/)) {
                alert('Ø§Ù„ØªØ§Ø±ÙŠØ® ØºØ§Ù„Ø·ØŒ ÙŠØ§ Ø®Ùˆ! ğŸ˜…');
                showGuardianComment('Ø¯Ø®Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® ØµØ­ØŒ ÙˆØ¥Ù„Ø§ Ù…Ø§Ù†ÙØªØ­Ø´ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚!');
                const errorSound = document.getElementById('errorSound');
                errorSound.play().catch(() => console.log('ØµÙˆØª ÙŠØ§ ÙˆÙŠÙ„ÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'));
                return;
            }
            const adventureContainer = document.getElementById('adventureContainer');
            adventureContainer.style.display = 'block';
            currentStep = 0;
            document.getElementById('progress').style.width = '0%';
            showGuardianComment('Ø±ØªÙ‘Ø¨ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆÙ†ÙØªØ­Ùˆ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚! ğŸ‡©ğŸ‡¿');
            sessionStorage.setItem('userName', userName);
            sessionStorage.setItem('birthdate', birthdateValue);
        }
        function chooseColor(color) {
            if (color === colorOrder[currentStep]) {
                currentStep++;
                document.getElementById('progress').style.width = `${(currentStep / 3) * 100}%`;
                showGuardianComment(`Ø¨Ø±Ø§ÙÙˆ! Ø§Ù„Ù„ÙˆÙ† ${currentStep} ØµØ­ÙŠØ­! ğŸ˜`);
                if (currentStep === 3) {
                    document.getElementById('adventureContainer').style.display = 'none';
                    calculateAge();
                    const bravoSound = document.getElementById('bravoSound');
                    bravoSound.play().catch(() => console.log('ØµÙˆØª Ø¨Ø±Ø§ÙÙˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'));
                }
            } else {
                showGuardianComment('ÙˆØ§Ø´ Ù‡Ø°Ø§ØŸ Ø§Ù„Ù„ÙˆÙ† ØºØ§Ù„Ø·! Ø­Ø§ÙˆÙ„ Ø«Ø§Ù†ÙŠ! ğŸ˜…');
                const errorSound = document.getElementById('errorSound');
                errorSound.play().catch(() => console.log('ØµÙˆØª ÙŠØ§ ÙˆÙŠÙ„ÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'));
            }
        }

        // Get Zodiac Sign
        function getZodiacSign(day, month) {
            const zodiacs = [
                { name: "Ø§Ù„Ø¬Ø¯ÙŠ", start: "12-22", end: "01-19", comment: "ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØŒ Ù‡Ø§Ø¯ÙŠ ÙˆÙ…Ù„ÙŠØ§Ù† Ø­ÙƒÙ…Ø© Ø²ÙŠ Ø§Ù„ØµØ­Ø±Ø§Ø¡! ğŸœï¸" },
                { name: "Ø§Ù„Ø¯Ù„Ùˆ", start: "01-20", end: "02-18", comment: "Ø§Ù„Ø¯Ù„ÙˆØŒ Ù…Ø®ØªÙ„Ù ÙƒÙŠÙ…Ø§ Ù†Ø³ÙŠÙ… Ø§Ù„Ø¨Ø­Ø±! ğŸŒŠ" },
                { name: "Ø§Ù„Ø­ÙˆØª", start: "02-19", end: "03-20", comment: "Ø§Ù„Ø­ÙˆØªØŒ Ù‚Ù„Ø¨Ùƒ ÙƒØ¨ÙŠØ± Ø²ÙŠ Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©! â¤ï¸" },
                { name: "Ø§Ù„Ø­Ù…Ù„", start: "03-21", end: "04-19", comment: "Ø§Ù„Ø­Ù…Ù„ØŒ Ù†Ø§Ø± ÙˆØ·Ø§Ù‚Ø© Ø²ÙŠ Ø´Ù…Ø³ Ø§Ù„Ø¬Ø²Ø§ÙŠØ±! ğŸ”¥" },
                { name: "Ø§Ù„Ø«ÙˆØ±", start: "04-20", end: "05-20", comment: "Ø§Ù„Ø«ÙˆØ±ØŒ Ø«Ø§Ø¨Øª ÙƒÙŠÙ…Ø§ Ø¬Ø¨Ø§Ù„ Ø§Ù„Ø£ÙˆØ±Ø§Ø³! ğŸ”ï¸" },
                { name: "Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡", start: "05-21", end: "06-20", comment: "Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡ØŒ Ù…Ù„ÙŠØ§Ù† Ø­ÙŠØ§Ø© Ø²ÙŠ Ù‚Ù‡ÙˆØ© Ø§Ù„ØµØ¨Ø§Ø­! â˜•" },
                { name: "Ø§Ù„Ø³Ø±Ø·Ø§Ù†", start: "06-21", end: "07-22", comment: "Ø§Ù„Ø³Ø±Ø·Ø§Ù†ØŒ Ø¹Ø§Ø·ÙÙŠ Ø²ÙŠ Ø£ØºÙ†ÙŠØ© Ø±Ø§ÙŠ! ğŸ¶" },
                { name: "Ø§Ù„Ø£Ø³Ø¯", start: "07-23", end: "08-22", comment: "Ø§Ù„Ø£Ø³Ø¯ØŒ Ø²Ø¹ÙŠÙ… Ø§Ù„Ø­ÙˆÙ…Ø©! ğŸ¦" },
                { name: "Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡", start: "08-23", end: "09-22", comment: "Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ØŒ Ø¯Ù‚ÙŠÙ‚ ÙƒÙŠÙ…Ø§ Ø²Ù„ÙŠØ¬! ğŸ–¼ï¸" },
                { name: "Ø§Ù„Ù…ÙŠØ²Ø§Ù†", start: "09-23", end: "10-22", comment: "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ØŒ Ù…ØªÙˆØ§Ø²Ù† Ø²ÙŠ Ø·Ø¨Ù‚ ÙƒØ³ÙƒØ³! ğŸ²" },
                { name: "Ø§Ù„Ø¹Ù‚Ø±Ø¨", start: "10-23", end: "11-21", comment: "Ø§Ù„Ø¹Ù‚Ø±Ø¨ØŒ ØºØ§Ù…Ø¶ ÙƒÙŠÙ…Ø§ Ù„ÙŠÙ„ Ø§Ù„ØµØ­Ø±Ø§Ø¡! ğŸŒ™" },
                { name: "Ø§Ù„Ù‚ÙˆØ³", start: "11-22", end: "12-21", comment: "Ø§Ù„Ù‚ÙˆØ³ØŒ Ù…ØºØ§Ù…Ø± Ø²ÙŠ Ø±Ø­Ù„Ø© Ù„ØªÙŠÙ…Ù‚Ø§Ø¯! ğŸ›ï¸" }
            ];
            const dateStr = `${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
            const zodiac = zodiacs.find(z => {
                const [startMonth, startDay] = z.start.split('-');
                const [endMonth, endDay] = z.end.split('-');
                return (dateStr >= z.start && dateStr <= z.end) ||
                       (z.start > z.end && (dateStr >= z.start || dateStr <= z.end));
            });
            return zodiac ? { name: zodiac.name, comment: zodiac.comment } : { name: "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ", comment: "" };
        }

        // Calculate fun stats
        function calculateFunStats(ageInDays) {
            const heartBeats = Math.floor(ageInDays * 24 * 60 * 70);
            const sleepHours = Math.floor(ageInDays * 8);
            return `Ù†Ø¨Ø¶Ø§Øª Ù‚Ù„Ø¨Ùƒ: <strong>${heartBeats.toLocaleString()}</strong> Ù†Ø¨Ø¶Ø©! ğŸ˜<br>Ø³Ø§Ø¹Ø§Øª Ù†ÙˆÙ…Ùƒ: <strong>${sleepHours.toLocaleString()}</strong> Ø³Ø§Ø¹Ø©! ğŸ˜´`;
        }

        // Generate advice
        function generateAdvice(age, dialect) {
            const adviceList = {
                darja: {
                    young: ["Ø±ÙˆØ­ Ø§ØªØ¹Ù„Ù… Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯ØŒ Ø§Ù„Ø¹Ù…Ø± Ù„Ø³Ù‡ Ù‚Ø¯Ø§Ù…Ùƒ! ğŸ“š", "Ø¬Ø±Ø¨ Ù‡ÙˆØ§ÙŠØ©ØŒ ÙŠÙ…ÙƒÙ† ØªØµÙŠØ± Ù†Ø¬Ù…! ğŸŒŸ"],
                    adult: ["Ø®Ù„Ù‘ÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø²ÙŠ Ø§Ù„ÙƒØ³ÙƒØ³ØŒ Ù…Ù„ÙŠØ§Ù†Ø© Ù„Ø°Ø©! ğŸ²", "Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ù†ÙØ³ÙƒØŒ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ÙŠØ³ØªÙ†Ø§Ùƒ! ğŸ’¼"],
                    senior: ["Ø§Ø³ØªÙ…ØªØ¹ ÙƒÙŠÙ…Ø§ Ù‚Ù‡ÙˆØ© Ø§Ù„ØµØ¨Ø§Ø­! â˜•", "Ø´Ø§Ø±Ùƒ Ø­ÙƒÙ…ØªÙƒ Ù…Ø¹ Ø§Ù„ØµØºØ§Ø±! ğŸ§ "]
                },
                kabyle: {
                    young: ["Ruá¸¥ ssuq-d tÉ£uri, tudert tettawi! ğŸ“š", "Æ”er yiwen amezruy, ad tebá¸iá¸! ğŸŒŸ"],
                    adult: ["Tudert am tala, tÉ›um-d s lá¸¥ikma! ğŸ²", "Ruá¸¥ sÉ›u lÇ§ehd, lÇ§il yettá¹›aÇ§u! ğŸ’¼"],
                    senior: ["Qim deg kra n lá¸¥aá¸ra am atay! â˜•", "Bá¸u lá¸¥ikma nnek d yessawalen! ğŸ§ "]
                }
            };
            const category = age < 18 ? 'young' : age < 50 ? 'adult' : 'senior';
            const advice = adviceList[dialect][category];
            return advice[Math.floor(Math.random() * advice.length)];
        }

        // Game Logic
        let gameScore = 0;
        const gameQuestions = [
            { q: "ØªØ­Ø¨ ØªØ§ÙƒÙ„ Ø§Ù„ÙƒØ³ÙƒØ³ ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©ØŸ ğŸ²", positive: true },
            { q: "ØªØ´Ø±Ø¨ Ø§Ù„Ù‚Ù‡ÙˆØ© Ø£ÙƒØ«Ø± Ù…Ù† 3 Ù…Ø±Ø§Øª ÙÙŠ Ø§Ù„ÙŠÙˆÙ…ØŸ â˜•", positive: false },
            { q: "ØªØ¹Ø±Ù ØªØºÙ†ÙŠ Ø£ØºÙ†ÙŠØ© Ø±Ø§ÙŠ Ù‚Ø¯ÙŠÙ…Ø©ØŸ ğŸ¶", positive: true },
            { q: "ØªØªÙØ±Ø¬ Ø¹Ù„Ù‰ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙƒØ±Ø© Ø­ØªÙ‰ Ù„Ùˆ Ù†Øµ Ø§Ù„Ù„ÙŠÙ„ØŸ âš½", positive: true }
        ];
        function startGame() {
            gameScore = 0;
            const gameContainer = document.getElementById('gameContainer');
            gameContainer.style.display = 'block';
            askGameQuestion();
        }
        function askGameQuestion() {
            const question = gameQuestions[Math.floor(Math.random() * gameQuestions.length)];
            document.getElementById('gameQuestion').innerHTML = question.q;
            sessionStorage.setItem('currentQuestion', JSON.stringify(question));
        }
        function answerGame(answer) {
            const question = JSON.parse(sessionStorage.getItem('currentQuestion'));
            if ((answer && question.positive) || (!answer && !question.positive)) {
                gameScore++;
            }
            if (gameScore >= 2) {
                const titles = [
                    "Ø´ÙŠØ® Ø§Ù„Ø­ÙˆÙ…Ø© ğŸ†",
                    "Ù†Ø¬Ù… Ø§Ù„ÙƒØ³ÙƒØ³ ğŸŒŸ",
                    "Ù…Ù„Ùƒ Ø§Ù„Ø±Ø§ÙŠ ğŸ¤",
                    "Ø¨Ø·Ù„ Ù‚Ø³Ù†Ø·ÙŠÙ†Ø© ğŸ’ª"
                ];
                document.getElementById('gameResult').innerHTML = `Ù…Ø¨Ø±ÙˆÙƒ! Ø¥Ù†Øª: <strong>${titles[Math.floor(Math.random() * titles.length)]}</strong>`;
                document.getElementById('gameContainer').style.display = 'none';
                showGuardianComment('ÙŠØ§ Ø³Ù„Ø§Ø§Ø§Ù…! Ø¥Ù†Øª Ø¨Ø·Ù„ Ø§Ù„Ø­ÙˆÙ…Ø©! ğŸ†');
                const clapSound = document.getElementById('clapSound');
                clapSound.play().catch(() => console.log('ØµÙˆØª Ø§Ù„ØªØµÙÙŠÙ‚ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'));
            } else {
                askGameQuestion();
            }
        }

        // Quiz Logic
        let quizScore = 0;
        const quizQuestions = [
            {
                q: "ÙˆÙŠÙ† ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù… Ø§Ù„Ø´Ù‡ÙŠØ¯ØŸ",
                options: ["Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø§Ù„Ø¹Ø§ØµÙ…Ø©", "ÙˆÙ‡Ø±Ø§Ù†", "Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©"],
                correct: 0
            },
            {
                q: "Ø£ÙŠ Ù…Ø¯ÙŠÙ†Ø© ØªØ³Ù…Ù‰ Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø¬Ø³ÙˆØ±ØŸ",
                options: ["Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø§Ù„Ø¹Ø§ØµÙ…Ø©", "Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", "Ø¹Ù†Ø§Ø¨Ø©"],
                correct: 1
            },
            {
                q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ù‚Ø¨Ø§Ø¦Ù„ÙŠØ©ØŸ",
                options: ["ØªÙŠØ²ÙŠ ÙˆØ²Ùˆ", "Ø¨Ø¬Ø§ÙŠØ©", "Ø³Ø·ÙŠÙ"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø·Ø¨Ù‚ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØªÙ‚Ø¯Ù… ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©ØŸ",
                options: ["Ø§Ù„ÙƒØ³ÙƒØ³", "Ø§Ù„Ø´ÙˆØ±Ø¨Ø©", "Ø§Ù„Ù…Ø­Ø§Ø¬Ø¨"],
                correct: 0
            },
            {
                q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨Ø§Ù„ÙÙ†Ø§Ø±ØŸ",
                options: ["Ø±Ø§Ø¨Ø­ Ù…Ø§Ø¬Ø±", "Ø±ÙŠØ§Ø¶ Ù…Ø­Ø±Ø²", "Ù„Ø®Ø¶Ø± Ø¨Ù„ÙˆÙ…ÙŠ"],
                correct: 0
            },
            {
                q: "ÙˆÙŠÙ† ØªÙ‚Ø¹ ØªÙŠÙ…Ù‚Ø§Ø¯ØŸ",
                options: ["Ø¨Ø§ØªÙ†Ø©", "Ø¹Ù†Ø§Ø¨Ø©", "ÙˆÙ‡Ø±Ø§Ù†"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ø±Ù‚ØµØ© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ø§Ù„Ù‚Ø¨Ø§Ø¦Ù„ÙŠØ©ØŸ",
                options: ["Ø§Ù„Ø£Ù‡Ù„ÙŠÙ„", "Ø§Ù„Ø±Ù‚ØµØ© Ø§Ù„Ø´Ø§ÙˆÙŠØ©", "Ø§Ù„Ø±Ù‚ØµØ© Ø§Ù„ØµØ­Ø±Ø§ÙˆÙŠØ©"],
                correct: 0
            },
            {
                q: "Ø£ÙŠ Ù…Ø¯ÙŠÙ†Ø© ØªÙÙ„Ù‚Ø¨ Ø¨Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø´Ø±Ù‚ØŸ",
                options: ["Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", "Ø¹Ù†Ø§Ø¨Ø©", "Ø³ÙƒÙŠÙƒØ¯Ø©"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ù„ÙŠ ÙÙŠÙ‡ Ù…Ù‚Ø§Ù… Ø³ÙŠØ¯ÙŠ Ø§Ù…Ø­Ù…Ø¯ØŸ",
                options: ["Ø¬Ø¨Ù„ Ø§Ù„Ø£ÙˆØ±Ø§Ø³", "Ø¬Ø¨Ù„ Ø§Ù„Ø´Ù„ÙŠØ§", "Ø¬Ø¨Ù„ ØªØ§Ù‡Ø§Øª"],
                correct: 1
            },
            {
                q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø´Ø§Ø¹Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ ØµØ§Ø­Ø¨ Ù‚ØµÙŠØ¯Ø© Ø¨Ù„Ø§Ø¯ÙŠØŸ",
                options: ["Ù…ÙØ¯ÙŠ Ø²ÙƒØ±ÙŠØ§", "Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙŠØ¯", "Ø£Ø­Ù…Ø¯ Ø³Ø­Ù†ÙˆÙ†"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù„ÙŠ ØªØ´ØªÙ‡Ø± Ø¨Ø§Ù„ØªÙ…ÙˆØ±ØŸ",
                options: ["Ø¨Ø³ÙƒØ±Ø©", "ÙˆØ±Ù‚Ù„Ø©", "ÙƒÙ„ÙŠÙ‡Ù…Ø§"],
                correct: 2
            },
            {
                q: "ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© Ø§Ø³ØªÙ‚Ù„Øª Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ØŸ",
                options: ["1962", "1954", "1975"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø±Ø­ Ø§Ù„ÙˆØ·Ù†ÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØŸ",
                options: ["Ù…Ø­ÙŠ Ø§Ù„Ø¯ÙŠÙ†", "Ø§Ù„Ù‚ØµØ¨Ø©", "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±"],
                correct: 0
            },
            {
                q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù…Ø·Ø±Ø¨ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ ØµØ§Ø­Ø¨ Ø£ØºÙ†ÙŠØ© Ù‚Ø§Ø·Ø±Ø©ØŸ",
                options: ["Ø§Ù„Ø´Ø§Ø¨ Ø®Ø§Ù„Ø¯", "Ø§Ù„Ø´Ø§Ø¨ Ø­Ø³Ù†ÙŠ", "Ø§Ù„Ø´Ø§Ø¨ Ù…Ø§Ù…ÙŠ"],
                correct: 1
            },
            {
                q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù„ÙŠ ØªÙÙ„Ù‚Ø¨ Ø¨Ø¬ÙˆÙ‡Ø±Ø© Ø§Ù„ØºØ±Ø¨ØŸ",
                options: ["ÙˆÙ‡Ø±Ø§Ù†", "ØªÙ„Ù…Ø³Ø§Ù†", "Ù…Ø³ØªØºØ§Ù†Ù…"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ²Ù‡ Ø§Ù„ÙˆØ·Ù†ÙŠ Ø§Ù„Ø´Ù‡ÙŠØ± ÙÙŠ ØªÙŠØ²ÙŠ ÙˆØ²ÙˆØŸ",
                options: ["Ø¬ÙˆØ±Ø¬ÙˆØ±Ø©", "Ø§Ù„Ø«Ù†ÙŠØ©", "Ø§Ù„Ù‚Ø§Ù„Ø©"],
                correct: 0
            },
            {
                q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø¨Ø·Ù„ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ø§Ù„Ù„ÙŠ Ù‚Ø§Ø¯ Ù…Ø¹Ø±ÙƒØ© Ø§Ù„Ø¬Ø±ÙØŸ",
                options: ["Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¨Ù† Ù…Ù‡ÙŠØ¯ÙŠ", "Ù…ØµØ·ÙÙ‰ Ø¨Ù† Ø¨ÙˆÙ„Ø¹ÙŠØ¯", "Ù‡ÙˆØ§Ø±ÙŠ Ø¨ÙˆÙ…Ø¯ÙŠÙ†"],
                correct: 1
            },
            {
                q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ Ù„Ù„Ù‚Ù‡ÙˆØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©ØŸ",
                options: ["Ù‚Ù‡ÙˆØ© Ø¹Ø±Ø¨ÙŠ", "Ù‚Ù‡ÙˆØ© ØªØ±ÙƒÙŠØ©", "Ù‚Ù‡ÙˆØ© Ø¥ÙŠØ·Ø§Ù„ÙŠØ©"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù„ÙŠ ØªØ´ØªÙ‡Ø± Ø¨Ø§Ù„ØºØ²Ù„Ø§Ù†ØŸ",
                options: ["Ø§Ù„Ø·Ø§Ø±Ù", "Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³", "Ù‚Ø§Ù„Ù…Ø©"],
                correct: 0
            },
            {
                q: "Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ø±Ø¬Ø§Ù† Ø§Ù„Ø«Ù‚Ø§ÙÙŠ ÙÙŠ ØªÙŠÙ…ÙŠÙ…ÙˆÙ†ØŸ",
                options: ["Ø³Ø¨ÙŠØ¨Ø©", "ØªÙˆÙ…ÙŠØ§Øª", "Ø§Ù„Ù‚ÙˆØ±Ø§Ø±Ø©"],
                correct: 0
            }
        ];
        function startQuiz() {
            quizScore = 0;
            const quizContainer = document.getElementById('quizContainer');
            quizContainer.style.display = 'block';
            document.getElementById('quizScore').innerHTML = `Ù†Ù‚Ø§Ø·Ùƒ: <strong>${quizScore}</strong>`;
            askQuizQuestion();
        }
        function askQuizQuestion() {
            const question = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
            document.getElementById('quizQuestion').innerHTML = question.q;
            const buttons = document.querySelectorAll('.quiz-container button');
            buttons.forEach((btn, i) => {
                btn.innerText = question.options[i];
            });
            sessionStorage.setItem('currentQuiz', JSON.stringify(question));
        }
        function answerQuiz(choice) {
            const question = JSON.parse(sessionStorage.getItem('currentQuiz'));
            if (choice === question.correct) {
                quizScore += 10;
                showGuardianComment('Ø¨Ø±Ø§ÙÙˆ! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ˜');
            } else {
                showGuardianComment('Ø£ÙˆØ¨Ø³! Ø­Ø§ÙˆÙ„ Ø«Ø§Ù†ÙŠ! ğŸ˜…');
            }
            document.getElementById('quizScore').innerHTML = `Ù†Ù‚Ø§Ø·Ùƒ: <strong>${quizScore}</strong>`;
            if (quizScore >= 50) {
                document.getElementById('quizResult').innerHTML = `Ù…Ø¨Ø±ÙˆÙƒ! Ø¥Ù†Øª <strong>Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø¯Ø²Ø§ÙŠØ± ğŸ‡©ğŸ‡¿</strong>`;
                document.getElementById('quizContainer').style.display = 'none';
                showGuardianComment('ÙˆØ§Ø§Ø§Ùˆ! Ø¥Ù†Øª ØªØ¹Ø±Ù Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ù…Ù„ÙŠØ­ Ø¨Ø²Ø§Ù! ğŸ˜');
                const clapSound = document.getElementById('clapSound');
                clapSound.play().catch(() => console.log('ØµÙˆØª Ø§Ù„ØªØµÙÙŠÙ‚ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'));
            } else {
                askQuizQuestion();
            }
        }

        // Stars Animation
        function createStars() {
            const starsContainer = document.querySelector('.stars');
            for (let i = 0; i < 20; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = `${Math.random() * 5}px`;
                star.style.height = star.style.width;
                star.style.left = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 2}s`;
                starsContainer.appendChild(star);
            }
            setTimeout(() => {
                starsContainer.innerHTML = '';
            }, 2000);
        }

        // Fake Age Counter
        function updateVisitorCounter() {
            const comments = [
                "Ø­ØªÙ‰ Ø§Ù„Ø¬ÙŠØ±Ø§Ù† Ø¬Ø§Ùˆ ÙŠØ­Ø³Ø¨Ùˆ! ğŸ˜",
                "Ø§Ù„Ø¯Ø²Ø§ÙŠØ± ÙƒÙ„Ù‡Ø§ Ù‡Ù†Ø§! ğŸš€",
                "Ø­Ø³Ø¨Ù†Ø§ Ø£Ø¹Ù…Ø§Ø± Ø§Ù„ØµØ­Ø±Ø§Ø¡ ÙƒÙ„Ù‡Ø§! ğŸœï¸"
            ];
            const count = Math.floor(Math.random() * 1000000) + 100000;
            document.getElementById('visitorCounter').innerHTML = `Ø£Ø¹Ù…Ø§Ø± Ù…Ø­Ø³ÙˆØ¨Ø©: <strong>${count.toLocaleString()}</strong>! ${comments[Math.floor(Math.random() * comments.length)]}`;
        }

        // Check for Festivals
        function checkFestival() {
            const today = new Date();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            if ((month === 1 && day <= 12) || (month === 4 && day >= 10 && day <= 12)) {
                document.body.classList.add('festival-mode');
                showGuardianComment('Ø¹ÙŠØ¯ Ø³Ø¹ÙŠØ¯! ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ¥Ù†Øª Ø¨Ø®ÙŠØ±! ğŸ‰');
            } else {
                document.body.classList.remove('festival-mode');
            }
        }

        function calculateAge() {
            const birthdateValue = sessionStorage.getItem('birthdate');
            const userName = sessionStorage.getItem('userName');
            const customTitle = document.getElementById('customTitle').value.trim() || "Ø¨Ø·Ù„ Ø§Ù„Ø­ÙˆÙ…Ø©";
            const dialect = document.getElementById('dialect').value;
            const frameStyle = document.getElementById('frameStyle').value;
            const bgColor = document.getElementById('bgColor').value;

            const [day, month, year] = birthdateValue.split('/').map(Number);
            if (!validateDate(day, month, year)) {
                alert('ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„!');
                showGuardianComment('ÙˆØ§Ø´ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŸ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ÙˆÙ„Ø§ ÙƒÙŠÙØ§Ù‡ØŸ ğŸ˜œ');
                const errorSound = document.getElementById('errorSound');
                errorSound.play().catch(() => console.log('ØµÙˆØª ÙŠØ§ ÙˆÙŠÙ„ÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'));
                return;
            }

            const birthdate = new Date(`${year}-${month}-${day}`);
            const today = new Date();
            let age = today.getFullYear() - birthdate.getFullYear();
            const monthDifference = today.getMonth() - birthdate.getMonth();
            if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthdate.getDate())) {
                age--;
            }

            const resultDiv = document.getElementById('result');
            const funnyCommentDiv = document.getElementById('funnyComment');
            const zodiacSignDiv = document.getElementById('zodiacSign');
            const funStatsDiv = document.getElementById('funStats');
            const adviceDiv = document.getElementById('advice');

            // Play clap sound and stars animation
            const clapSound = document.getElementById('clapSound');
            clapSound.play().catch(() => console.log('ØµÙˆØª Ø§Ù„ØªØµÙÙŠÙ‚ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'));
            createStars();
            showGuardianComment('Ø­Ø³Ø¨Ù†Ø§ Ø¹Ù…Ø±Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ø± Ø¥Ù†ÙØªØ­! ğŸ‰');

            // Update festival mode
            checkFestival();

            // Update visitor counter
            updateVisitorCounter();

            resultDiv.innerHTML = `<i class="fas fa-user"></i> ÙŠØ§ ${userName}ØŒ Ø¹Ù…Ø±Ùƒ Ù‡Ùˆ: <strong>${age}</strong> Ø³Ù†Ø©!`;

            // Calculate zodiac sign
            const zodiac = getZodiacSign(day.toString(), month.toString());
            zodiacSignDiv.innerHTML = `Ø¨Ø±Ø¬Ùƒ: <strong>${zodiac.name}</strong>! ${zodiac.comment}`;

            // Calculate fun stats
            const ageInDays = Math.floor((today - birthdate) / (1000 * 60 * 60 * 24));
            funStatsDiv.innerHTML = calculateFunStats(ageInDays);

            // Generate advice
            adviceDiv.innerHTML = `Ù†ØµÙŠØ­Ø© Ù„ÙŠÙƒ: <strong>${generateAdvice(age, dialect)}</strong>`;

            // Comments
            let comments = [];
            if (dialect === "darja") {
                if (age < 18) {
                    comments = [
                        "ÙŠØ§ ØµØºÙŠØ±ØŒ Ø±ÙˆØ­ Ù†Ø§Ù… ÙˆÙ„Ø§ ØªÙ†Ø³Ù‰ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª! ğŸ“š",
                        "Ø¹Ù…Ø±Ùƒ Ø²ÙŠ Ù‚Ù‡ÙˆØ© Ø§Ù„ØµØ¨Ø§Ø­ØŒ ÙƒÙ„ Ù…Ø§ ÙŠØ·ÙˆÙ„ ÙŠØ­Ù„Ù‰! â˜•",
                        "Ø¥Ù†Øª Ù‚Ø¯ Ø§Ù„Ø¯Ø²Ø§ÙŠØ±ØŒ Ù…Ù„ÙŠØ§Ù† Ø­ÙŠØ§Ø©! ğŸ‡©ğŸ‡¿"
                    ];
                } else if (age >= 18 && age < 25) {
                    comments = [
                        "Ø´Ø§Ø¨ Ø¹Ø§Ù…Ø±ØŒ Ø±ÙˆØ­ Ø´ÙˆÙ Ù„Ùƒ Ø­ÙŠØ§Ø©! ğŸ’ª",
                        "Ø§Ù„Ø¹Ù…Ø± Ø²ÙŠ Ø·Ø¨Ù‚ ÙƒØ³ÙƒØ³ØŒ Ù…Ù„ÙŠØ§Ù† Ù„Ø°Ø©! ğŸ²",
                        "Ø±ÙˆØ­ Ø§ØªØ¹Ù„Ù…ØŒ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø²ÙŠ Ø¬Ø³Ø± Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©! ğŸŒ‰"
                    ];
                } else if (age >= 25 && age < 50) {
                    comments = [
                        "Ø§Ø³ØªÙ‚Ø± ÙˆØ®Ù„Ù‘ÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø²ÙŠ Ù‚Ù‡ÙˆØ© Ø§Ù„ØµØ¨Ø§Ø­! â˜•",
                        "Ø§Ù„Ø¹Ù…Ø± Ø²ÙŠ Ø£ØºÙ†ÙŠØ© Ø±Ø§ÙŠØŒ ÙƒÙ„ Ù…Ø§ ØªÙƒØ¨Ø± ØªØ­Ù„Ù‰! ğŸ¶",
                        "Ø±ÙˆØ­ Ø¬ÙŠØ¨ Ù„Ù‚Ø¨ ÙØ®Ù… Ø²ÙŠ Ù…Ù„Ùƒ Ø§Ù„Ø­ÙˆÙ…Ø©! ğŸ†"
                    ];
                } else {
                    comments = [
                        "ÙŠØ§ Ø¹Ù…ÙŠØŒ Ø§Ø³ØªÙ…ØªØ¹ Ø²ÙŠ Ø´Ø§ÙŠ ÙÙŠ Ø§Ù„ØµØ­Ø±Ø§Ø¡! ğŸŒ´",
                        "Ø§Ù„Ø¹Ù…Ø± Ø²ÙŠ Ù‚ØµØ¨Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ØŒ Ù…Ù„ÙŠØ§Ù† Ø­ÙƒØ§ÙŠØ§Øª! ğŸ›ï¸",
                        "Ø­ÙƒÙ…ØªÙƒ ÙƒÙŠÙ…Ø§ Ø²Ù„ÙŠØ¬ØŒ Ø¯Ø§ÙŠÙ…Ø©! ğŸ–¼ï¸"
                    ];
                }
            } else if (dialect === "kabyle") {
                if (age < 18) {
                    comments = [
                        "A winu aqcic, ruá¸¥ ghas i tÉ£uri! ğŸ“š",
                        "LÉ›emrek am tirga n Tizi, d asuf! ğŸï¸",
                        "Ruá¸¥ ssuq-d tafat, tudert tettawi! ğŸŒŸ"
                    ];
                } else if (age >= 18 && age < 25) {
                    comments = [
                        "Argaz ameqran, ruá¸¥ af-d tudert! ğŸ’ª",
                        "LÉ›emrek am azzar n yewet, yettban! ğŸŒ±",
                        "Ruá¸¥ ssuq-d tafat, tudert tettawi! ğŸŒŸ"
                    ];
                } else if (age >= 25 && age < 50) {
                    comments = [
                        "Ruá¸¥ ssuq-d tafat, tudert tettawi! ğŸŒŸ",
                        "LÉ›emrek am tala n Djurdjura, d lá¸¥ikma! ğŸ”ï¸",
                        "Ruá¸¥ af-d tayri, am akken yella deg Tizi! ğŸ’"
                    ];
                } else {
                    comments = [
                        "A winu amÉ£ar, ruá¸¥ qim deg laman! ğŸ˜…",
                        "LÉ›emrek am taÉ£ect n yennayer, d lá¸¥ikma! ğŸ‰",
                        "Ruá¸¥ ssuq-d tafat, tudert tettawi! ğŸŒŸ"
                    ];
                }
            }

            const randomComment = comments[Math.floor(Math.random() * comments.length)];
            funnyCommentDiv.innerHTML = randomComment;

            // Store data for sharing
            sessionStorage.setItem('userName', userName);
            sessionStorage.setItem('customTitle', customTitle);
            sessionStorage.setItem('age', age);
            sessionStorage.setItem('zodiac', zodiac.name);
            sessionStorage.setItem('zodiacComment', zodiac.comment);
            sessionStorage.setItem('comment', randomComment);
            sessionStorage.setItem('funStats', funStatsDiv.innerHTML);
            sessionStorage.setItem('advice', adviceDiv.innerHTML);
            sessionStorage.setItem('frameStyle', frameStyle);
            sessionStorage.setItem('bgColor', bgColor);

            // Start game
            startGame();

            // Show Share Buttons
            document.querySelectorAll('.share-button').forEach(btn => btn.style.display = 'block');
            document.querySelector('.download-button').style.display = 'block';
            document.querySelector('.qr-button').style.display = 'block';
            document.querySelector('.certificate-button').style.display = 'block';
            document.querySelector('.quiz-button').style.display = 'block';
            document.getElementById('socialShare').style.display = 'flex';
        }

        function shareResult() {
            const frameStyle = sessionStorage.getItem('frameStyle') || 'default';
            const bgColor = sessionStorage.getItem('bgColor') || 'white';
            const shareFrame = document.getElementById('shareFrame');
            shareFrame.className = `frame ${frameStyle}`;
            shareFrame.style.background = bgColor;

            const userName = sessionStorage.getItem('userName');
            const resultDiv = `ÙŠØ§ ${userName}ØŒ Ø¹Ù…Ø±Ùƒ Ù‡Ùˆ: ${sessionStorage.getItem('age')} Ø³Ù†Ø©!`;
            const funnyCommentDiv = sessionStorage.getItem('comment');
            const zodiacSignDiv = `Ø¨Ø±Ø¬Ùƒ: ${sessionStorage.getItem('zodiac')}! ${sessionStorage.getItem('zodiacComment')}`;
            const funStatsDiv = sessionStorage.getItem('funStats');
            const adviceDiv = sessionStorage.getItem('advice');
            const gameResultDiv = document.getElementById('gameResult').innerText;
            const quizResultDiv = document.getElementById('quizResult').innerText;
            const date = new Date().toLocaleDateString();

            // Update Share Container Content
            document.getElementById('shareResultText').innerText = resultDiv + ' ğŸ‡©ğŸ‡¿';
            document.getElementById('shareCommentText').innerText = funnyCommentDiv;
            document.getElementById('shareZodiacSign').innerText = zodiacSignDiv;
            document.getElementById('shareFunStats').innerText = funStatsDiv;
            document.getElementById('shareAdvice').innerText = adviceDiv;
            document.getElementById('shareGameResult').innerText = gameResultDiv;
            document.getElementById('shareQuizResult').innerText = quizResultDiv;
            document.getElementById('shareDateText').innerText = `ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ${date} â˜•`;

            // Show Share Container
            const shareContainer = document.getElementById('shareContainer');
            shareContainer.style.display = 'block';

            // Capture Share Container as Image
            html2canvas(shareContainer, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.href = imgData;
                link.download = `Ø¹Ù…Ø±Ùƒ_Ø¨Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©_${date}.png`;
                link.click();
            }).catch(err => console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©:', err));

            // Hide Share Container
            setTimeout(() => {
                shareContainer.style.display = 'none';
            }, 1000);
        }

        function downloadResult() {
            const frameStyle = sessionStorage.getItem('frameStyle') || 'default';
            const bgColor = sessionStorage.getItem('bgColor') || 'white';
            const shareFrame = document.getElementById('shareFrame');
            shareFrame.className = `frame ${frameStyle}`;
            shareFrame.style.background = bgColor;

            const userName = sessionStorage.getItem('userName');
            const resultDiv = `ÙŠØ§ ${userName}ØŒ Ø¹Ù…Ø±Ùƒ Ù‡Ùˆ: ${sessionStorage.getItem('age')} Ø³Ù†Ø©!`;
            const funnyCommentDiv = sessionStorage.getItem('comment');
            const zodiacSignDiv = `Ø¨Ø±Ø¬Ùƒ: ${sessionStorage.getItem('zodiac')}! ${sessionStorage.getItem('zodiacComment')}`;
            const funStatsDiv = sessionStorage.getItem('funStats');
            const adviceDiv = sessionStorage.getItem('advice');
            const gameResultDiv = document.getElementById('gameResult').innerText;
            const quizResultDiv = document.getElementById('quizResult').innerText;
            const date = new Date().toLocaleDateString();

            // Update Share Container Content
            document.getElementById('shareResultText').innerText = resultDiv + ' ğŸ‡©ğŸ‡¿';
            document.getElementById('shareCommentText').innerText = funnyCommentDiv;
            document.getElementById('shareZodiacSign').innerText = zodiacSignDiv;
            document.getElementById('shareFunStats').innerText = funStatsDiv;
            document.getElementById('shareAdvice').innerText = adviceDiv;
            document.getElementById('shareGameResult').innerText = gameResultDiv;
            document.getElementById('shareQuizResult').innerText = quizResultDiv;
            document.getElementById('shareDateText').innerText = `ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ${date} â˜•`;

            // Show Share Container
            const shareContainer = document.getElementById('shareContainer');
            shareContainer.style.display = 'block';

            // Generate PDF
            html2canvas(shareContainer, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF();
                const imgWidth = 190;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                pdf.save(`Ø¹Ù…Ø±Ùƒ_Ø¨Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©_${date}.pdf`);
            }).catch(err => console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ PDF:', err));

            // Hide Share Container
            setTimeout(() => {
                shareContainer.style.display = 'none';
            }, 1000);
        }

        function shareToAll() {
            if (navigator.share) {
                navigator.share({
                    title: 'Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ ğŸ˜',
                    text: `Ø§ÙƒØªØ´ÙØª Ø¹Ù…Ø±ÙŠ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¶Ø­ÙƒØ©! Ø¬Ø±Ø¨ÙˆÙ‡Ø§: ${window.location.href}`,
                    url: window.location.href
                }).catch(err => console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©:', err));
            } else {
                alert('Ø®Ø§ØµÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø©! Ø¬Ø±Ø¨ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø®Ø±Ù‰.');
                showGuardianComment('Ø§Ù„Ù…ØªØµÙØ­ Ù…Ø§ Ø¹Ø§ÙˆÙ†Ø§Ø´! Ø¬Ø±Ø¨ WhatsApp ÙˆÙ„Ø§ Facebook ğŸ˜…');
            }
        }

        function shareToWhatsApp() {
            const text = encodeURIComponent(`Ø¹Ù…Ø±ÙŠ Ø­Ø³Ø¨ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©! ğŸ˜ Ø§ÙƒØªØ´Ù Ø¹Ù…Ø±Ùƒ: ${window.location.href}`);
            window.open(`https://api.whatsapp.com/send?text=${text}`, '_blank');
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
        }

        function shareToX() {
            const text = encodeURIComponent('Ø§ÙƒØªØ´ÙØª Ø¹Ù…Ø±ÙŠ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ù…Ø¶Ø­ÙƒØ©! ğŸ˜ Ø¬Ø±Ø¨ÙˆÙ‡Ø§!');
            const url = encodeURIComponent(window.location.href);
            window.open(`https://x.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }

        function shareToMessenger() {
            const url = encodeURIComponent(window.location.href);
            window.open(`fb-messenger://share/?link=${url}`, '_blank');
        }

        function generateQR() {
            const userName = sessionStorage.getItem('userName');
            const age = sessionStorage.getItem('age');
            const zodiac = sessionStorage.getItem('zodiac');
            const comment = sessionStorage.getItem('comment');
            const qrText = `${window.location.href}?name=${encodeURIComponent(userName)}&age=${age}&zodiac=${zodiac}&comment=${encodeURIComponent(comment)}`;
            const qrCodeDiv = document.getElementById('qrCode');
            qrCodeDiv.innerHTML = '';
            qrCodeDiv.style.display = 'block';
            new QRCode(qrCodeDiv, {
                text: qrText,
                width: 200,
                height: 200
            });
            showGuardianComment('Ø§Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø² ÙˆØ´Ø§Ø±Ùƒ Ø¹Ù…Ø±Ùƒ Ù…Ø¹ Ø§Ù„Ø­ÙˆÙ…Ø©! ğŸ˜œ');
            setTimeout(() => {
                qrCodeDiv.style.display = 'none';
            }, 10000);
        }

        function generateCertificate() {
            const frameStyle = sessionStorage.getItem('frameStyle') || 'default';
            const bgColor = sessionStorage.getItem('bgColor') || 'white';
            const certificateFrame = document.getElementById('certificateFrame');
            certificateFrame.className = `frame ${frameStyle}`;
            certificateFrame.style.background = bgColor;

            const userName = sessionStorage.getItem('userName');
            const customTitle = sessionStorage.getItem('customTitle');
            const age = sessionStorage.getItem('age');
            const zodiac = sessionStorage.getItem('zodiac');
            const comment = sessionStorage.getItem('comment');
            const date = new Date().toLocaleDateString();

            document.getElementById('certificateName').innerText = `Ø§Ù„Ø§Ø³Ù…: ${userName} ğŸ‡©ğŸ‡¿`;
            document.getElementById('certificateTitle').innerText = `Ø§Ù„Ù„Ù‚Ø¨: ${customTitle}`;
            document.getElementById('certificateAge').innerText = `Ø§Ù„Ø¹Ù…Ø±: ${age} Ø³Ù†Ø©`;
            document.getElementById('certificateZodiac').innerText = `Ø§Ù„Ø¨Ø±Ø¬: ${zodiac}`;
            document.getElementById('certificateComment').innerText = `ØªØ¹Ù„ÙŠÙ‚: ${comment}`;
            document.getElementById('certificateDate').innerText = `ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${date} â˜•`;

            const certificateContainer = document.getElementById('certificateContainer');
            certificateContainer.style.display = 'block';

            html2canvas(certificateContainer, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.href = imgData;
                link.download = `Ø´Ù‡Ø§Ø¯Ø©_Ø¹Ù…Ø±_${userName}_${date}.png`;
                link.click();
            }).catch(err => console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©:', err));

            showGuardianComment('Ø´Ù‡Ø§Ø¯Ø© ÙØ®Ù…Ø© ÙƒÙŠÙ…Ø§ Ø§Ù„ÙƒØ³ÙƒØ³! Ø´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ø§Ù„ØµØ­Ø§Ø¨! ğŸ²');
            setTimeout(() => {
                certificateContainer.style.display = 'none';
            }, 1000);
        }
    </script>
</body>
</html>